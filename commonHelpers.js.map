{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { getImages } from \"./pixabay-api\";\nimport simpleLightbox from \"simplelightbox\";\n\nconst form = document.querySelector(\".list-width-item\");\n\n\nexport function createImg({ largeImageURL, likes, views, downloads, comments, webformatURL }) {\n\n    return `<li class=\"item\">\n        <a class=\"image-large\" href=\"${largeImageURL}\">\n            <img\n            class=\"img\"\n            src=\"${ webformatURL}\"\n            alt=\"\"\n            />\n        </a>\n        \n        <ul class=\"list-width-img\">\n          <li class=\"item-params\">\n            <p class=\"name-params\">Likes</p>\n            <p class=\"params\">${likes}</p>\n          </li>\n          <li class=\"item-params\">\n            <p class=\"name-params\">Views</p>\n            <p class=\"params\">${views}</p>\n          </li>\n          <li class=\"item-params\">\n            <p class=\"name-params\">Comments</p>\n            <p class=\"params\">${comments}</p>\n          </li>\n          <li class=\"item-params\">\n            <p class=\"name-params\">Downloads</p>\n            <p class=\"params\">${downloads}</p>\n          </li>\n        </ul>\n      </li>`\n\n\n}\n\n\n\nexport function imagesTemplate({ hits }) {\n    const markup = hits.map(createImg).join(\"\");\n    form.insertAdjacentHTML(\"beforeend\", markup);\n    const gallery = new simpleLightbox('.list-width-item .image-large');\n    gallery.refresh();\n}\n\n\n    \n\n\n  \n\n\n\n","import axios from \"axios\";\nimport { createImg } from \"./render-functions\";\n\n\nexport async function getImages(query, currentPage) {\n    const BASE_URL = \"https://pixabay.com/\";\n    const END_POINT = \"api/\";\n    const API_KEY = \"43200126-fe47e1a89238cebb9641f8f5f\";\n    const paramsUrl = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation:\"horizontal\",\n        safesearch: \"true\",\n    });\n\n    const params = {\n        per_page: 15,\n        page : currentPage,\n    }\n\n    const url = `${BASE_URL}${END_POINT}?${paramsUrl}`;\n    const res = await axios.get(url, {params});\n    return res.data;\n\n}\n\n\n\n\n","import IziToast from \"izitoast\";\nimport 'izitoast/dist/css/iziToast.min.css';\n\n\n\nimport { getImages } from \"./js/pixabay-api\";\nimport { imagesTemplate } from \"./js/render-functions\";\nimport iziToast from \"izitoast\";\n\n\nconst submit = document.querySelector(\".form\");\nconst form = document.querySelector(\".list-width-item\");\nconst loader = document.querySelector(\"#loader\");\nconst btnLoadMore = document.querySelector(\".load-more\");\n\n\n\n// Global params ==============\n\nlet currentPage;\nlet query;\nlet maxPage = 0;\nlet pageSize = 15;\n\n// ============================\n\nsubmit.addEventListener(\"submit\", async e => {\n\n    e.preventDefault();\n\n    query = e.target.elements.query.value;\n    const emptyValue = query.trim();\n\n    currentPage = 1;\n    form.innerHTML = \"\";\n\n    showLoader();\n   \n\n    const imgArr = await getImages(query, currentPage);\n    maxPage = Math.ceil(imgArr.totalHits / pageSize);\n    try {\n        \n        imagesTemplate(imgArr);\n        if (!emptyValue) {\n            iziToast.error({\n                title: 'Error',\n                message: 'You don`t put value',\n                position: \"topRight\",\n            });\n\n            hiddenLoader();\n            \n           return  form.innerHTML = \"\";\n        } else {\n\n           if (imgArr.total == 0) {\n            iziToast.warning({\n                title: 'Caution',\n                message: 'Not correct data',\n                position: \"topLeft\",\n            });\n               \n               hiddenLoader();\n               \n            return  form.innerHTML = \"\";\n           } \n        } \n        \n    } catch (error) {\n        console.log(err);\n    }\n\n\n    showLoadMore();\n    checkBtnStatus();\n    hiddenLoader();\n\n    e.target.reset();\n});\n\nbtnLoadMore.addEventListener(\"click\", onLoadMoreClick);\n\nasync function onLoadMoreClick() {\n    currentPage += 1;\n    showLoader();\n     const imgArr = await getImages(query, currentPage);\n    try { \n        imagesTemplate(imgArr);  \n    } catch (error) {\n        console.log(err);\n    }\n    \n    hiddenLoader();\n    showLoadMore();\n    checkBtnStatus();\n    myScroll();\n}\n\nfunction showLoader() {\n    loader.classList.remove(\"hidden\");\n}\n\nfunction hiddenLoader() {\n    loader.classList.add(\"hidden\");\n}\n\nfunction showLoadMore() {\n    btnLoadMore.classList.remove(\"hidden\");\n }\nfunction hiddenLoadMore() {\n    btnLoadMore.classList.add(\"hidden\");\n}\n\nfunction checkBtnStatus() {\n    if (currentPage >= maxPage) {\n        hiddenLoadMore();\n        iziToast.info({\n            message:\"Sorry, we don`t heve images\"\n        });\n    } else { \n        showLoadMore();\n    }\n}\n\nfunction myScroll() {\n    const height = (form.firstChild.getBoundingClientRect().height) * 2;\n\n    window.scrollBy({\n        top: height ,\n        behavior: 'smooth',\n    });\n}\n\n\n\n\n"],"names":["form","createImg","largeImageURL","likes","views","downloads","comments","webformatURL","imagesTemplate","hits","markup","simpleLightbox","getImages","query","currentPage","BASE_URL","END_POINT","API_KEY","paramsUrl","params","url","axios","submit","loader","btnLoadMore","maxPage","pageSize","e","emptyValue","showLoader","imgArr","iziToast","hiddenLoader","showLoadMore","checkBtnStatus","onLoadMoreClick","myScroll","hiddenLoadMore","height"],"mappings":"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"}